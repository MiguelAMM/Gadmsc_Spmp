<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"> 

    <ui:composition template="./../../plantillas/spmp_plantilla.xhtml">
        <ui:define name="page-content">
            <h:form id="frmEquiChofer" styleClass="estilo-pagina">
                <p:growl id="msg" showDetail="true"/>
                <p:outputPanel >
                    <p:panel id="pnlEquiChofer">
                        <center>
                            <h:outputText value="#{etq.tit_reporte_equi_chofer}" styleClass="estiloTextoCandaraGranColor"/>
                            <p:spacer width="200" height="20"/>
                            <p:panel>
                                <p:tabView id="tabViewEquiChofer">
                                    <p:tab id="tabVolq" title="Volquetas">
                                        <p:dataTable id="tableVolq" var="volquetas" value="#{reporteControlador.listaVolquetas}"
                                                     scrollable="true"
                                                     scrollWidth="96%"
                                                     styleClass="estiloListaCalibriPeq" 
                                                     emptyMessage="#{etq.msg_seg_sinRegistros}">
                                            <p:column headerText="Volqueta número" style="width:30px;text-align: center">
                                                <h:outputText value="#{volquetas.usuCodigo}"/>
                                            </p:column>
                                            <p:column headerText="Placa" style="width:30px;text-align: center">
                                                <h:outputText value="#{volquetas.usuNombre}"/>
                                            </p:column>
                                            <p:column headerText="Contraseña" style="width:30px;text-align: center">
                                                <h:outputText value="#{volquetas.usuPass}"/>
                                            </p:column>
                                            <p:column style="width:30px;text-align: center">
                                                <p:commandButton id="btnSeleccion" update=":frmDialogoVolq"
                                                                 onclick="PF('volqDialogo').show();" icon="ui-icon-search" process="@this" 
                                                                 title="Ver">
                                                    <f:setPropertyActionListener value="#{volquetas}" target="#{reporteControlador.volquetaSeleccionada}"/>
                                                </p:commandButton>                                                    
                                            </p:column>
                                        </p:dataTable>
                                    </p:tab>
                                    <p:tab id="tabEqui" title="Equipos">
                                        <p:dataTable id="tableEq" var="equipo" value="#{reporteControlador.listaEquipos}"
                                                     scrollable="true"
                                                     scrollWidth="96%"
                                                     styleClass="estiloListaCalibriPeq" 
                                                     emptyMessage="#{etq.msg_seg_sinRegistros}">
                                            <p:column headerText="Equipo caminero" style="width:30px;text-align: center">
                                                <h:outputText value="#{equipo.eqTipo}"/>
                                            </p:column>
                                            <p:column headerText="Placa" style="width:30px;text-align: center">
                                                <h:outputText value="#{equipo.eqPlaca}"/>
                                            </p:column>
                                            <p:column headerText="Contraseña" style="width:30px;text-align: center">
                                                <h:outputText value="#{equipo.eqPass}"/>
                                            </p:column>
                                            <p:column style="width:30px;text-align: center">
                                                <p:commandButton id="btnSeleccionEqui" update=":frmDialogoEq" process="@this"
                                                                 onclick="PF('eqDialogo').show();" icon="ui-icon-search" title="Ver">
                                                    <f:setPropertyActionListener value="#{equipo}" target="#{reporteControlador.equipoSeleccionado}"/>
                                                </p:commandButton>                                                    
                                            </p:column>
                                        </p:dataTable>
                                    </p:tab>
                                </p:tabView>
                            </p:panel>
                        </center>
                    </p:panel>
                </p:outputPanel>
            </h:form>
            <p:dialog header="Actualizar volqueta" widgetVar="volqDialogo" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
                <h:form id="frmDialogoVolq">
                    <p:outputPanel id="volqDetail" style="text-align: center;">
                        <p:panelGrid columns="2" rendered="#{not empty reporteControlador.volquetaSeleccionada}">
                            <h:outputText value="Volqueta número"/>
                            <p:inputText value="#{reporteControlador.volquetaSeleccionada.usuCodigo}"/>
                            <h:outputText value="Placa"/>
                            <p:inputText value="#{reporteControlador.volquetaSeleccionada.usuNombre}"/>
                            <h:outputText value="Contraseña"/>
                            <p:inputText value="#{reporteControlador.volquetaSeleccionada.usuPass}"/>
                        </p:panelGrid>
                        <p:commandButton id="btnActualiza" value="Actualizar" action="#{reporteControlador.actualizarVolqueta()}" update=":frmEquiChofer"/>
                    </p:outputPanel>
                </h:form>
            </p:dialog>

            <p:dialog header="Actualizar equipo" widgetVar="eqDialogo" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
                <h:form id="frmDialogoEq">
                    <p:outputPanel id="eqDetail" style="text-align: center;">
                        <p:panelGrid columns="2" rendered="#{not empty reporteControlador.equipoSeleccionado}">
                            <h:outputText value="Equipo caminero"/>
                            <p:inputText value="#{reporteControlador.equipoSeleccionado.eqTipo}"/>
                            <h:outputText value="Placa"/>
                            <p:inputText value="#{reporteControlador.equipoSeleccionado.eqPlaca}"/>
                            <h:outputText value="Contraseña"/>
                            <p:inputText value="#{reporteControlador.equipoSeleccionado.eqPass}"/>
                        </p:panelGrid>
                        <p:commandButton id="btnActualizaEq" value="Actualizar" action="#{reporteControlador.actualizarEquipo()}" update=":frmEquiChofer"/>
                    </p:outputPanel>
                </h:form>
            </p:dialog>

        </ui:define>        
    </ui:composition>
</html>
