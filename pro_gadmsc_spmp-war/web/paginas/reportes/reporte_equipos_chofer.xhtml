<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"> 

    <ui:composition template="./../../plantillas/spmp_plantilla.xhtml">
        <ui:define name="page-content">
            <h:form id="frmEquiChofer" styleClass="estilo-pagina">
                <p:growl id="msg" showDetail="true"/>
                <p:outputPanel >
                    <p:panel id="pnlEquiChofer">
                        <center>
                            <h:outputText value="#{etq.tit_reporte_equi_chofer}" styleClass="estiloTextoCandaraGranColor"/>
                            <p:spacer width="200" height="20"/>
                            <p:panel>
                                <p:tabView id="tabViewEquiChofer">
                                    <p:tab id="tabVolq" title="Volquetas">
                                        <p:commandButton id="btnIngresoNuevoVolq" value="Ingresar nueva volqueta" update=":frmDialogoVolq:volqDetalle" oncomplete="PF('volqDialogo').show()"
                                                         process="@this" action="#{reporteControlador.ingresarNuevo()}"/>
                                        <p:dataTable id="tableVolq" var="volquetas" value="#{reporteControlador.listaVolquetas}"
                                                     scrollable="true"
                                                     scrollWidth="96%"
                                                     styleClass="estiloListaCalibriPeq" 
                                                     emptyMessage="#{etq.msg_seg_sinRegistros}">
                                            <p:column headerText="Volqueta número" style="width:30px;text-align: center">
                                                <h:outputText value="#{volquetas.usuCodigo}"/>
                                            </p:column>
                                            <p:column headerText="Placa" style="width:30px;text-align: center">
                                                <h:outputText value="#{volquetas.usuNombre}"/>
                                            </p:column>
                                            <p:column headerText="Contraseña" style="width:30px;text-align: center">
                                                <h:outputText value="#{volquetas.usuPass}"/>
                                            </p:column>
                                            <p:column headerText="Chofer" style="width:30px;text-align: center">
                                                <h:outputText value="#{volquetas.fkChoferCodigo}"/>
                                            </p:column>
                                            <p:column style="width:30px;text-align: center">
                                                <p:commandButton id="btnSeleccion" update=":frmDialogoVolq:volqDetalle" oncomplete="PF('volqDialogo').show()"
                                                                 icon="ui-icon-search" process="@this" title="Ver" action="#{reporteControlador.seleccionarVolq()}">
                                                    <f:setPropertyActionListener value="#{volquetas}" target="#{reporteControlador.volquetaSeleccionada}"/>
                                                </p:commandButton>                                                    
                                            </p:column>
                                        </p:dataTable>
                                    </p:tab>
                                    <p:tab id="tabEqui" title="Equipos">
                                        <p:commandButton id="btnIngresoNuevoEq" value="Ingresar nuevo equipo" update=":frmDialogoEq:eqDetalle" oncomplete="PF('eqDialogo').show()"
                                                         process="@this" action="#{reporteControlador.ingresarNuevo()}"/>
                                        <p:dataTable id="tableEq" var="equipo" value="#{reporteControlador.listaEquipos}"
                                                     scrollable="true"
                                                     scrollWidth="96%"
                                                     styleClass="estiloListaCalibriPeq" 
                                                     emptyMessage="#{etq.msg_seg_sinRegistros}">
                                            <p:column headerText="Equipo caminero" style="width:30px;text-align: center">
                                                <h:outputText value="#{equipo.eqTipo}"/>
                                            </p:column>
                                            <p:column headerText="Placa" style="width:30px;text-align: center">
                                                <h:outputText value="#{equipo.eqPlaca}"/>
                                            </p:column>
                                            <p:column headerText="Contraseña" style="width:30px;text-align: center">
                                                <h:outputText value="#{equipo.eqPass}"/>
                                            </p:column>
                                            <p:column headerText="Chofer" style="width:30px;text-align: center">
                                                <h:outputText value="#{equipo.fkChoferCodigo}"/>
                                            </p:column>
                                            <p:column style="width:30px;text-align: center">
                                                <p:commandButton id="btnSeleccionEqui" update=":frmDialogoEq:eqDetalle" process="@this"
                                                                 oncomplete="PF('eqDialogo').show()" icon="ui-icon-search" title="Ver" action="#{reporteControlador.seleccionarEquipo()}">
                                                    <f:setPropertyActionListener value="#{equipo}" target="#{reporteControlador.equipoSeleccionado}"/>
                                                </p:commandButton>                                                    
                                            </p:column>
                                        </p:dataTable>
                                    </p:tab>
                                    <p:tab id="tabChofer" title="Choferes">
                                        <p:commandButton id="btnIngresoNuevoChofer" value="Ingresar nuevo chofer" update=":frmDialogoChofer:choferDetalle" oncomplete="PF('choferDialogo').show()"
                                                         process="@this" action="#{reporteControlador.ingresarNuevo()}"/>
                                        <p:dataTable id="tableChoferes" var="choferes" value="#{reporteControlador.listaChoferes}"
                                                     scrollable="true"
                                                     scrollWidth="96%"
                                                     styleClass="estiloListaCalibriPeq" 
                                                     emptyMessage="#{etq.msg_seg_sinRegistros}">
                                            <p:column headerText="Nombre" style="width:30px;text-align: center">
                                                <h:outputText value="#{choferes.choferNombre}"/>
                                            </p:column>
                                            <p:column headerText="Apellido" style="width:30px;text-align: center">
                                                <h:outputText value="#{choferes.choferApellido}"/>
                                            </p:column>
                                            <p:column headerText="Cédula de identidad" style="width:30px;text-align: center">
                                                <h:outputText value="#{choferes.choferCi}"/>
                                            </p:column>
                                            <p:column headerText="Teléfono" style="width:30px;text-align: center">
                                                <h:outputText value="#{choferes.choferTlf}"/>
                                            </p:column>
                                            <p:column headerText="Correo electrónico" style="width:30px;text-align: center">
                                                <h:outputText value="#{choferes.choferEmail}"/>
                                            </p:column>
                                            <p:column headerText="Dirección domicilio" style="width:30px;text-align: center">
                                                <h:outputText value="#{choferes.choferDireccion}"/>
                                            </p:column>
                                            <p:column headerText="Fecha nacimiento" style="width:30px;text-align: center">
                                                <h:outputText value="#{choferes.choferFechaNac}"/>
                                            </p:column>
                                            <p:column headerText="Asignado" style="width:30px;text-align: center">
                                                <h:outputText value="#{choferes.choferAsignado}"/>
                                            </p:column>
                                            <p:column style="width:30px;text-align: center">
                                                <p:commandButton id="btnSeleccionChofer" update=":frmDialogoChofer:choferDetalle" process="@this" action="#{reporteControlador.seleccionarChofer()}"
                                                                 icon="ui-icon-search" title="Ver" oncomplete="PF('choferDialogo').show()">
                                                    <f:setPropertyActionListener value="#{choferes}" target="#{reporteControlador.chofer}"/>
                                                </p:commandButton>                                                    
                                            </p:column>
                                        </p:dataTable>
                                    </p:tab>
                                </p:tabView>

                            </p:panel>
                        </center>
                    </p:panel>
                </p:outputPanel>
            </h:form>


            <p:dialog id="dialogoVolq" header="Volqueta" widgetVar="volqDialogo" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
                <h:form id="frmDialogoVolq">
                    <p:outputPanel id="volqDetalle" style="text-align:center;">
                        <p:panelGrid id="panelVolq" columns="2">
                            <h:outputText value="Volqueta número"/>
                            <p:inputText value="#{reporteControlador.volquetaSeleccionada.usuCodigo}" disabled="#{reporteControlador.textoIngreso}"/>
                            <h:outputText value="Placa"/>
                            <p:inputText value="#{reporteControlador.volquetaSeleccionada.usuNombre}"/>
                            <h:outputText value="Contraseña"/>
                            <p:inputText value="#{reporteControlador.volquetaSeleccionada.usuPass}"/>
                            <h:outputText value="Chofer"/>
                            <p:selectOneMenu id="cmbChoferVolq" value="#{reporteControlador.idChoferVolq}">
                                <f:selectItem itemLabel="Seleccione chofer" itemValue="0"/>
                                <f:selectItems value="#{reporteControlador.listaChoferes}" var="varChoferes"
                                               itemLabel="#{varChoferes}" itemValue="#{varChoferes.choferCodigo}"/>
                            </p:selectOneMenu>
                        </p:panelGrid>
                        <p:commandButton id="btnIngresoVolq" value="Ingresar" action="#{reporteControlador.ingresarVolqueta()}" 
                                         update=":frmEquiChofer:tabViewEquiChofer:tableVolq :frmEquiChofer:msg" disabled="#{reporteControlador.ingreso}"/>
                        <p:commandButton id="btnActualizaVolq" value="Actualizar" action="#{reporteControlador.actualizarVolqueta()}" 
                                         update=":frmEquiChofer:tabViewEquiChofer:tableVolq :frmEquiChofer:msg" disabled="#{reporteControlador.actualiza}"/>    
                    </p:outputPanel>
                </h:form>                    
            </p:dialog>

            <p:dialog id="dialogoEq" header="Equipo" widgetVar="eqDialogo" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
                <h:form id="frmDialogoEq">
                    <p:outputPanel id="eqDetalle" style="text-align:center;">
                        <p:panelGrid id="panelEqui" columns="2">
                            <h:outputText value="Tipo"/>
                            <p:inputText value="#{reporteControlador.equipoSeleccionado.eqTipo}" disabled="#{reporteControlador.textoIngreso}"/>
                            <h:outputText value="Placa"/>
                            <p:inputText value="#{reporteControlador.equipoSeleccionado.eqPlaca}"/>
                            <h:outputText value="Contraseña"/>
                            <p:inputText value="#{reporteControlador.equipoSeleccionado.eqPass}"/>
                            <h:outputText value="Chofer"/>
                            <p:selectOneMenu id="cmbChoferEq" value="#{reporteControlador.idChoferEq}">
                                <f:selectItem itemLabel="Seleccione chofer" itemValue="0"/>
                                <f:selectItems value="#{reporteControlador.listaChoferes}" var="varChoferesEq"
                                               itemLabel="#{varChoferesEq}" itemValue="#{varChoferesEq.choferCodigo}"/>
                            </p:selectOneMenu>
                        </p:panelGrid>
                        <p:commandButton id="btnIngresoEq" value="Ingresar" action="#{reporteControlador.ingresarEquipo()}" 
                                         update=":frmEquiChofer:tabViewEquiChofer:tableEq :frmEquiChofer:msg" disabled="#{reporteControlador.ingreso}"/>
                        <p:commandButton id="btnActualizaEq" value="Actualizar" action="#{reporteControlador.actualizarEquipo()}" 
                                         update=":frmEquiChofer:tabViewEquiChofer:tableEq :frmEquiChofer:msg" disabled="#{reporteControlador.actualiza}"/>
                    </p:outputPanel>
                </h:form>
            </p:dialog>

            <p:dialog id="dialogoChofer" header="Chofer" widgetVar="choferDialogo" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
                <h:form id="frmDialogoChofer">
                    <p:outputPanel id="choferDetalle" style="text-align:center;">
                        <p:panelGrid id="panelChofer" columns="2">
                            <h:outputText value="Nombre"/>
                            <p:inputText value="#{reporteControlador.chofer.choferNombre}"/>
                            <h:outputText value="Apellido"/>
                            <p:inputText value="#{reporteControlador.chofer.choferApellido}"/>
                            <h:outputText value="Cédula"/>
                            <p:inputText value="#{reporteControlador.chofer.choferCi}" onkeypress="return validarEnteros(event)"/>
                            <h:outputText value="Teléfono"/>
                            <p:inputText value="#{reporteControlador.chofer.choferTlf}" onkeypress="return validarEnteros(event)"/>
                            <h:outputText value="Dirección"/>
                            <p:inputText value="#{reporteControlador.chofer.choferDireccion}"/>
                            <h:outputText value="Fecha de nacimiento"/>
                            <p:calendar value="#{reporteControlador.chofer.choferFechaNac}" pattern="dd-MM-yyyy" mask="true"
                                        locale="es" navigator="true"/>
                            <h:outputText value="Asignado"/>
                            <p:selectOneRadio id="radioCargaT"
                                              value="#{reporteControlador.chofer.choferAsignado}"
                                              columns="2">
                                <f:selectItem itemLabel="SI" itemValue="SI"/>
                                <f:selectItem itemLabel="NO" itemValue="NO"/>
                            </p:selectOneRadio>
                            <h:outputText value="Correo electrónico"/>
                            <p:inputText value="#{reporteControlador.chofer.choferEmail}"/>
                        </p:panelGrid>
                        <p:commandButton id="btnIngresoChofer" value="Ingresar" action="#{reporteControlador.ingresarChofer()}" 
                                         disabled="#{reporteControlador.ingreso}" update=":frmEquiChofer:tabViewEquiChofer:tableChoferes :frmEquiChofer:msg"/>
                        <p:commandButton id="btnActualizaChofer" value="Actualizar" action="#{reporteControlador.actualizarChofer()}" 
                                         update=":frmEquiChofer:tabViewEquiChofer:tableChoferes :frmEquiChofer:msg" disabled="#{reporteControlador.actualiza}"/>    
                    </p:outputPanel>
                </h:form>
            </p:dialog>

        </ui:define>        
    </ui:composition>
</html>
